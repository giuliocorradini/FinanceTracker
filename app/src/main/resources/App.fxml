<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>

<AnchorPane minHeight="400.0" minWidth="600.0" xmlns="http://javafx.com/javafx/17.0.2-ea" xmlns:fx="http://javafx.com/fxml/1" fx:controller="financetracker.gui.controller.AppController" stylesheets="stylesheets/App.css">
    <BorderPane AnchorPane.topAnchor="0.0" AnchorPane.bottomAnchor="0.0" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0" xmlns="http://javafx.com/javafx/17.0.2-ea" xmlns:fx="http://javafx.com/fxml/1">
        <top>
            <MenuBar BorderPane.alignment="CENTER" useSystemMenuBar="true">
                <menus>
                    <Menu mnemonicParsing="false" text="File">
                        <items>
                            <MenuItem mnemonicParsing="false" text="Save" onAction="#handleSave" />
                            <MenuItem mnemonicParsing="false" text="Load" onAction="#handleLoad" />
                            <MenuItem mnemonicParsing="false" text="Close" onAction="#handleClose" />
                            <Menu mnemonicParsing="false" text="Export...">
                                <MenuItem mnemonicParsing="false" text="CSV" onAction="#handleExport" fx:id="csvExportMenuItem" />
                                <MenuItem mnemonicParsing="false" text="OpenDocument" onAction="#handleExport" fx:id="openDocumentExportMenuItem" />
                                <MenuItem mnemonicParsing="false" text="Columnar File" onAction="#handleExport" fx:id="columnarExportMenuItem" />
                            </Menu>
                            <MenuItem text="Search" onAction="#showSearch" />
                        </items>
                    </Menu>
                    <Menu mnemonicParsing="false" text="Edit" onShowing="#handleEditMenuClick">
                        <items>
                            <MenuItem mnemonicParsing="false" text="Delete" onAction="#handleSelectedRowsDelete" fx:id="multirowDeleteMenu"/>
                        </items>
                    </Menu>
                </menus>
            </MenuBar>
        </top>
        <center>
            <TableView fx:id="recordTable" BorderPane.alignment="CENTER" >
                <columns>
                    <TableColumn fx:id="selectColumn" prefWidth="25.0" resizable="false" />
                    <TableColumn fx:id="recordTypeColumn" prefWidth="40.0" resizable="false" />
                    <TableColumn fx:id="amountColumn" prefWidth="${(recordTable.width - 65) * 0.15}"  text="Amount" />
                    <TableColumn fx:id="dateColumn" prefWidth="${(recordTable.width - 65) * 0.15}"  text="Date" />
                    <TableColumn fx:id="reasonColumn" prefWidth="${(recordTable.width - 65) * 0.7}" text="Reason" />
                </columns>
                <ContextMenu fx:id="tableContextMenu" >
                    <items>
                        <MenuItem text="Delete" fx:id="deleteMenuItem" onAction="#handleSingleRowDelete" />
                    </items>
                </ContextMenu>
            </TableView>
        </center>
        <bottom>
            <HBox alignment="BOTTOM_RIGHT" BorderPane.alignment="CENTER">
                <children>
                    <Label text="Income:" />
                    <Text strokeType="OUTSIDE" strokeWidth="0.0" fx:id="incomeSummary" />
                    <Label text="Outcome:" />
                    <Text strokeType="OUTSIDE" strokeWidth="0.0" fx:id="outcomeSummary" />
                    <Label text="Flow:" />
                    <Text strokeType="OUTSIDE" strokeWidth="0.0" fx:id="flowSummary" />
                    <Pane HBox.hgrow="ALWAYS" />
                    <Button onAction="#showCustomPeriodSelector" text="Filter" />
                    <Button id="addButton" mnemonicParsing="false" onAction="#handleAddButtonClick" text="Add" />
                </children>
            </HBox>
        </bottom>
    </BorderPane>
    <Pane fx:id="opaqueLayer" styleClass="opaque_layer" AnchorPane.topAnchor="0.0" AnchorPane.bottomAnchor="0.0" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0" />
    <fx:include source="AddRecordDialog.fxml" fx:id="addRecordDialog" AnchorPane.topAnchor="100.0" AnchorPane.bottomAnchor="100.0" AnchorPane.leftAnchor="100.0" AnchorPane.rightAnchor="100.0" />
</AnchorPane>
